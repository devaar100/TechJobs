{"ast":null,"code":"import _assertThisInitialized from\"/Users/aarnavjindal/WebstormProjects/techjobs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _toConsumableArray from\"/Users/aarnavjindal/WebstormProjects/techjobs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/aarnavjindal/WebstormProjects/techjobs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aarnavjindal/WebstormProjects/techjobs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/aarnavjindal/WebstormProjects/techjobs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aarnavjindal/WebstormProjects/techjobs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"/Users/aarnavjindal/WebstormProjects/techjobs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{Component}from'react';import{Container,Row,Col,Pagination as RBPagination}from\"react-bootstrap\";import axios from'axios';import*as _ from'lodash';import fire from\"../fire\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var URL='https://techjobs100.herokuapp.com/';// const URL = 'http://localhost:4000/'\nvar Job=function Job(_ref){var job=_ref.job,onEdit=_ref.onEdit,onView=_ref.onView,onAppSubmit=_ref.onAppSubmit,isPersonal=_ref.isPersonal;var uid=fire.auth().currentUser.uid;return/*#__PURE__*/_jsx(Row,{style:styles.container,children:/*#__PURE__*/_jsxs(Col,{children:[isPersonal&&/*#__PURE__*/_jsx(Row,{style:_objectSpread(_objectSpread({},styles.text),{},{fontWeight:'bold'}),children:job.isAccepting?'Accepting right now':'Not accepting applications'}),/*#__PURE__*/_jsxs(Row,{style:styles.text,children:[\"Company - \",job.company]}),/*#__PURE__*/_jsxs(Row,{style:styles.text,children:[\"Profile - \",job.profile]}),!_.isEmpty(job.profileURL)&&/*#__PURE__*/_jsxs(Row,{style:styles.text,children:[\"Profile URL - \",job.profileURL]}),/*#__PURE__*/_jsxs(Row,{style:styles.text,children:[\"Open for - \",job.openFor]}),/*#__PURE__*/_jsxs(Row,{style:styles.text,children:[\"Description - \",job.description]}),/*#__PURE__*/_jsxs(\"div\",{style:{flexDirection:'row',marginTop:10},children:[job.postedBy!==fire.auth().currentUser.uid&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return onAppSubmit(uid,job);},disabled:job.uids.includes(uid),style:{marginLeft:-16},className:\"btn btn-primary\",children:job.uids.includes(uid)?'Applied':'Apply'}),job.postedBy===fire.auth().currentUser.uid&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:-16},onClick:function onClick(){return onEdit(job);},className:\"btn btn-danger\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:16},onClick:function onClick(){return onView(job._id);},className:\"btn btn-info\",children:\"View applications\"})]})]})]})},job.id);};var defaultProps={initialPage:1};var Pagination=/*#__PURE__*/function(_React$Component){_inherits(Pagination,_React$Component);var _super=_createSuper(Pagination);function Pagination(props){var _this;_classCallCheck(this,Pagination);_this=_super.call(this,props);_this.state={pager:{}};return _this;}_createClass(Pagination,[{key:\"componentWillMount\",value:function componentWillMount(){// set page if items array isn't empty\nif(this.props.items&&this.props.items.length){this.setPage(this.props.initialPage);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){// reset page if items array has changed\nif(this.props.items!==prevProps.items){this.setPage(this.props.initialPage);}}},{key:\"setPage\",value:function setPage(page){var items=this.props.items;// get new pager object for specified page\nvar pager=this.getPager(items.length,page,5);if(page<1||page>pager.totalPages){return;}// get new page of items from items array\nvar pageOfItems=items.slice(pager.startIndex,pager.endIndex+1);// update state\nthis.setState({pager:pager});// call change page function in parent component\nthis.props.onChangePage(pageOfItems);}},{key:\"getPager\",value:function getPager(totalItems,currentPage,pageSize){// default to first page\ncurrentPage=currentPage||1;// default page size is 10\npageSize=pageSize||10;// calculate total pages\nvar totalPages=Math.ceil(totalItems/pageSize);var startPage,endPage;if(totalPages<=10){// less than 10 total pages so show all\nstartPage=1;endPage=totalPages;}else{// more than 10 total pages so calculate start and end pages\nif(currentPage<=6){startPage=1;endPage=10;}else if(currentPage+4>=totalPages){startPage=totalPages-9;endPage=totalPages;}else{startPage=currentPage-5;endPage=currentPage+4;}}// calculate start and end item indexes\nvar startIndex=(currentPage-1)*pageSize;var endIndex=Math.min(startIndex+pageSize-1,totalItems-1);// create an array of pages to ng-repeat in the pager control\nvar pages=_toConsumableArray(Array(endPage+1-startPage).keys()).map(function(i){return startPage+i;});// return object with all pager properties required by the view\nreturn{totalItems:totalItems,currentPage:currentPage,pageSize:pageSize,totalPages:totalPages,startPage:startPage,endPage:endPage,startIndex:startIndex,endIndex:endIndex,pages:pages};}},{key:\"render\",value:function render(){var _this2=this;var pager=this.state.pager;if(!pager.pages||pager.pages.length<=1){// don't display pager if there is only 1 page\nreturn null;}return/*#__PURE__*/_jsxs(RBPagination,{size:\"lg\",children:[/*#__PURE__*/_jsx(RBPagination.First,{onClick:function onClick(){return _this2.setPage(1);},disabled:pager.currentPage===1}),/*#__PURE__*/_jsx(RBPagination.Prev,{onClick:function onClick(){return _this2.setPage(pager.currentPage-1);},disabled:pager.currentPage===1}),pager.pages.map(function(page,index){return/*#__PURE__*/_jsx(RBPagination.Item,{onClick:function onClick(){return _this2.setPage(page);},active:pager.currentPage===page,children:page},index);}),/*#__PURE__*/_jsx(RBPagination.Next,{onClick:function onClick(){return _this2.setPage(pager.currentPage+1);},disabled:pager.currentPage===pager.totalPages}),/*#__PURE__*/_jsx(RBPagination.Last,{onClick:function onClick(){return _this2.setPage(pager.totalPages);},disabled:pager.currentPage===pager.totalPages})]});}}]);return Pagination;}(React.Component);Pagination.defaultProps=defaultProps;var JobList=/*#__PURE__*/function(_Component){_inherits(JobList,_Component);var _super2=_createSuper(JobList);function JobList(props){var _this3;_classCallCheck(this,JobList);_this3=_super2.call(this,props);_this3.state={loading:true,pageOfItems:[],jobs:[],visibleItems:[],showAll:true};_this3.onChangePage=_this3.onChangePage.bind(_assertThisInitialized(_this3));_this3.onEdit=_this3.onEdit.bind(_assertThisInitialized(_this3));_this3.onView=_this3.onView.bind(_assertThisInitialized(_this3));_this3.onAppSubmit=_this3.onAppSubmit.bind(_assertThisInitialized(_this3));return _this3;}_createClass(JobList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;axios.get(\"\".concat(URL,\"jobs/\")).then(function(response){console.log(response);_this4.setState({visibleItems:response.data.filter(function(job){return job.isAccepting;}),jobs:response.data,loading:false});}).catch(function(error){console.log(error);});}},{key:\"onChangePage\",value:function onChangePage(pageOfItems){this.setState({pageOfItems:pageOfItems});}},{key:\"onEdit\",value:function onEdit(job){this.props.history.push({pathname:'/job',state:{job:job}});}},{key:\"onView\",value:function onView(id){this.props.history.push({pathname:'/all',state:{id:id}});}},{key:\"showAll\",value:function showAll(type){if(type){this.setState({visibleItems:this.state.jobs.filter(function(job){return job.isAccepting;}),showAll:true});}else{var uid=fire.auth().currentUser.uid;this.setState({visibleItems:this.state.jobs.filter(function(job){return job.postedBy===uid;}),showAll:false});}}},{key:\"onAppSubmit\",value:function onAppSubmit(uid,refJob){var newJob=Object.assign({},refJob);newJob.uids.push(uid);var jobs=this.state.jobs.map(function(job){if(job._id===refJob._id){return newJob;}else{return job;}});var visibleItems=this.state.visibleItems.map(function(job){if(job._id===refJob._id){return newJob;}else{return job;}});this.setState({jobs:jobs,visibleItems:visibleItems});axios.post(\"\".concat(URL,\"jobs/apply/\")+uid,newJob).then(function(res){console.log(res.data);if(res.data==='Profile incomplete'){alert('Could not apply. Your profile section is incomplete.');}});}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{fluid:true,children:[/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",style:{padding:20},children:[/*#__PURE__*/_jsx(\"button\",{style:{borderRadius:15,backgroundColor:'orange'},onClick:function onClick(){return _this5.showAll(true);},className:\"btn\",children:\"All Postings\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:40}}),/*#__PURE__*/_jsx(\"button\",{style:{borderRadius:15,backgroundColor:'orange'},onClick:function onClick(){return _this5.showAll(false);},className:\"btn\",children:\"My Postings\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:40}}),/*#__PURE__*/_jsx(\"button\",{style:{borderRadius:15},onClick:function onClick(){return _this5.onEdit(null);},className:\"btn btn-success\",children:\"Add Posting\"})]}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{sm:12,md:6,children:this.state.visibleItems.length?this.state.pageOfItems.map(function(item,index){return/*#__PURE__*/_jsx(Job,{job:item,index:index,isPersonal:!_this5.state.showAll,onAppSubmit:_this5.onAppSubmit,onView:_this5.onView,onEdit:_this5.onEdit});}):/*#__PURE__*/_jsx(\"h5\",{children:\"No postings available here !\"})})}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",style:{paddingTop:30,paddingBottom:50},children:this.state.visibleItems.length?/*#__PURE__*/_jsx(Pagination,{items:this.state.visibleItems,onChangePage:this.onChangePage}):null})]})});}}]);return JobList;}(Component);export{JobList as default};var styles={container:{marginTop:15,marginBottom:15,borderStyle:\"solid\",borderWidth:1,borderRadius:5,borderColor:\"#cccccc\",paddingTop:15,paddingBottom:15,paddingLeft:25,paddingRight:25},text:{fontSize:18},icon:{marginTop:10,marginRight:10}};","map":{"version":3,"sources":["/Users/aarnavjindal/WebstormProjects/techjobs/client/src/components/job-list.component.js"],"names":["React","Component","Container","Row","Col","Pagination","RBPagination","axios","_","fire","URL","Job","job","onEdit","onView","onAppSubmit","isPersonal","uid","auth","currentUser","styles","container","text","fontWeight","isAccepting","company","profile","isEmpty","profileURL","openFor","description","flexDirection","marginTop","postedBy","uids","includes","marginLeft","_id","id","defaultProps","initialPage","props","state","pager","items","length","setPage","prevProps","prevState","page","getPager","totalPages","pageOfItems","slice","startIndex","endIndex","setState","onChangePage","totalItems","currentPage","pageSize","Math","ceil","startPage","endPage","min","pages","Array","keys","map","i","index","JobList","loading","jobs","visibleItems","showAll","bind","get","then","response","console","log","data","filter","catch","error","history","push","pathname","type","refJob","newJob","Object","assign","post","res","alert","padding","borderRadius","backgroundColor","width","item","paddingTop","paddingBottom","marginBottom","borderStyle","borderWidth","borderColor","paddingLeft","paddingRight","fontSize","icon","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n    Container,\n    Row, Col,\n    Pagination as RBPagination\n} from \"react-bootstrap\"\nimport PropTypes from \"prop-types\"\nimport axios from 'axios';\nimport * as _ from 'lodash';\nimport fire from \"../fire\";\nconst URL = 'https://techjobs100.herokuapp.com/'\n// const URL = 'http://localhost:4000/'\n\nconst Job = ({ job, onEdit, onView, onAppSubmit, isPersonal }) => {\n\n    const uid = fire.auth().currentUser.uid\n\n    return (\n        <Row style={styles.container} key={job.id}>\n            <Col>\n                {isPersonal && <Row style={{...styles.text, fontWeight: 'bold'}}>{job.isAccepting ? 'Accepting right now' : 'Not accepting applications'}</Row>}\n                <Row style={styles.text}>Company - {job.company}</Row>\n                <Row style={styles.text}>Profile - {job.profile}</Row>\n                {!_.isEmpty(job.profileURL) && <Row style={styles.text}>Profile URL - {job.profileURL}</Row>}\n                <Row style={styles.text}>Open for - {job.openFor}</Row>\n                <Row style={styles.text}>Description - {job.description}</Row>\n                <div style={{flexDirection: 'row', marginTop: 10}}>\n                    {job.postedBy!==fire.auth().currentUser.uid &&\n                        <button\n                            onClick={() => onAppSubmit(uid, job)}\n                            disabled={job.uids.includes(uid)}\n                            style={{marginLeft: -16}}\n                            className=\"btn btn-primary\">{job.uids.includes(uid) ? 'Applied': 'Apply'}</button>\n                    }\n                    {job.postedBy===fire.auth().currentUser.uid &&\n                        <>\n                            <button\n                                style={{marginLeft: -16}}\n                                onClick={() => onEdit(job)}\n                                className=\"btn btn-danger\">Edit</button>\n                            <button\n                                style={{marginLeft: 16}}\n                                onClick={() => onView(job._id)}\n                                className=\"btn btn-info\">View applications</button>\n                        </>\n                    }\n                </div>\n            </Col>\n        </Row>\n    )\n}\n\nconst propTypes = {\n    items: PropTypes.array.isRequired,\n    onChangePage: PropTypes.func.isRequired,\n    initialPage: PropTypes.number\n}\n\nconst defaultProps = {\n    initialPage: 1\n}\n\nclass Pagination extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {pager: {}};\n    }\n\n    componentWillMount() {\n        // set page if items array isn't empty\n        if (this.props.items && this.props.items.length) {\n            this.setPage(this.props.initialPage);\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        // reset page if items array has changed\n        if (this.props.items !== prevProps.items) {\n            this.setPage(this.props.initialPage);\n        }\n    }\n\n    setPage(page) {\n        const items = this.props.items;\n        // get new pager object for specified page\n        const pager = this.getPager(items.length, page, 5);\n\n        if (page < 1 || page > pager.totalPages) {\n            return;\n        }\n\n        // get new page of items from items array\n        const pageOfItems = items.slice(pager.startIndex, pager.endIndex + 1);\n\n        // update state\n        this.setState({pager: pager});\n\n        // call change page function in parent component\n        this.props.onChangePage(pageOfItems);\n    }\n\n    getPager(totalItems, currentPage, pageSize) {\n        // default to first page\n        currentPage = currentPage || 1;\n\n        // default page size is 10\n        pageSize = pageSize || 10;\n\n        // calculate total pages\n        const totalPages = Math.ceil(totalItems / pageSize);\n\n        let startPage, endPage;\n        if (totalPages <= 10) {\n            // less than 10 total pages so show all\n            startPage = 1;\n            endPage = totalPages;\n        } else {\n            // more than 10 total pages so calculate start and end pages\n            if (currentPage <= 6) {\n                startPage = 1;\n                endPage = 10;\n            } else if (currentPage + 4 >= totalPages) {\n                startPage = totalPages - 9;\n                endPage = totalPages;\n            } else {\n                startPage = currentPage - 5;\n                endPage = currentPage + 4;\n            }\n        }\n\n        // calculate start and end item indexes\n        const startIndex = (currentPage - 1) * pageSize;\n        const endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1);\n\n        // create an array of pages to ng-repeat in the pager control\n        const pages = [...Array((endPage + 1) - startPage).keys()].map(i => startPage + i);\n\n        // return object with all pager properties required by the view\n        return {\n            totalItems: totalItems,\n            currentPage: currentPage,\n            pageSize: pageSize,\n            totalPages: totalPages,\n            startPage: startPage,\n            endPage: endPage,\n            startIndex: startIndex,\n            endIndex: endIndex,\n            pages: pages\n        };\n    }\n\n    render() {\n        const pager = this.state.pager;\n\n        if (!pager.pages || pager.pages.length <= 1) {\n            // don't display pager if there is only 1 page\n            return null;\n        }\n\n        return (\n            <RBPagination size=\"lg\">\n                <RBPagination.First\n                    onClick={() => this.setPage(1)}\n                    disabled={pager.currentPage === 1}/>\n                <RBPagination.Prev\n                    onClick={() => this.setPage(pager.currentPage - 1)}\n                    disabled={pager.currentPage === 1}/>\n                {pager.pages.map((page, index) =>\n                    <RBPagination.Item\n                        onClick={() => this.setPage(page)}\n                        key={index}\n                        active={pager.currentPage === page}>\n                        {page}\n                    </RBPagination.Item>\n                )}\n                <RBPagination.Next\n                    onClick={() => this.setPage(pager.currentPage + 1)}\n                    disabled={pager.currentPage === pager.totalPages}/>\n                <RBPagination.Last\n                    onClick={() => this.setPage(pager.totalPages)}\n                    disabled={pager.currentPage === pager.totalPages}/>\n            </RBPagination>\n        );\n    }\n}\n\nPagination.propTypes = propTypes;\nPagination.defaultProps = defaultProps;\n\nexport default class JobList extends Component {\n\n    componentDidMount() {\n        axios.get(`${URL}jobs/`)\n            .then(response => {\n                console.log(response)\n                this.setState({\n                    visibleItems: response.data.filter(job => job.isAccepting),\n                    jobs: response.data,\n                    loading: false,\n                })\n            })\n            .catch(function (error){\n                console.log(error);\n            })\n    }\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            loading: true,\n            pageOfItems: [],\n            jobs: [],\n            visibleItems: [],\n            showAll: true\n        };\n\n        this.onChangePage = this.onChangePage.bind(this);\n        this.onEdit = this.onEdit.bind(this);\n        this.onView = this.onView.bind(this);\n        this.onAppSubmit = this.onAppSubmit.bind(this);\n    }\n\n    onChangePage(pageOfItems) {\n        this.setState({pageOfItems: pageOfItems});\n    }\n\n    onEdit(job) {\n        this.props.history.push({\n            pathname: '/job',\n            state: {\n                job\n            }\n        })\n    }\n\n    onView(id) {\n        this.props.history.push({\n            pathname: '/all',\n            state: {\n                id\n            }\n        })\n    }\n\n    showAll(type) {\n        if(type) {\n            this.setState({\n                visibleItems: this.state.jobs.filter(job => job.isAccepting),\n                showAll: true\n            })\n        } else {\n            const uid = fire.auth().currentUser.uid\n            this.setState({\n                visibleItems: this.state.jobs.filter(job => job.postedBy===uid),\n                showAll: false\n            })\n        }\n    }\n\n    onAppSubmit(uid, refJob) {\n        const newJob = Object.assign({}, refJob)\n        newJob.uids.push(uid)\n\n        const jobs = this.state.jobs.map(job => {\n            if(job._id === refJob._id) {\n                return newJob\n            } else {\n                return job\n            }\n        })\n\n        const visibleItems = this.state.visibleItems.map(job => {\n            if(job._id === refJob._id) {\n                return newJob\n            } else {\n                return job\n            }\n        })\n\n        this.setState({\n            jobs: jobs,\n            visibleItems: visibleItems\n        })\n\n        axios.post(`${URL}jobs/apply/` + uid, newJob).then(res => {\n            console.log(res.data)\n            if(res.data === 'Profile incomplete') {\n                alert('Could not apply. Your profile section is incomplete.')\n            }\n        });\n    }\n\n    render() {\n        return (\n            <>\n                <Container fluid>\n                    <Row className=\"justify-content-center\" style={{padding: 20}}>\n                        <button style={{borderRadius: 15, backgroundColor: 'orange'}} onClick={() => this.showAll(true)} className=\"btn\">All Postings</button>\n                        <div style={{width: 40}}/>\n                        <button style={{borderRadius: 15, backgroundColor: 'orange'}} onClick={() => this.showAll(false)} className=\"btn\">My Postings</button>\n                        <div style={{width: 40}}/>\n                        <button style={{borderRadius: 15}} onClick={() => this.onEdit(null)} className=\"btn btn-success\">Add Posting</button>\n                    </Row>\n                    <Row className=\"justify-content-center\">\n                        <Col sm={12} md={6}>\n                            {this.state.visibleItems.length ? this.state.pageOfItems.map((item, index) =>\n                                    <Job job={item} index={index}\n                                         isPersonal={!this.state.showAll}\n                                         onAppSubmit={this.onAppSubmit}\n                                         onView={this.onView}\n                                         onEdit={this.onEdit}/> ) :\n                                <h5>No postings available here !</h5>\n                            }\n                        </Col>\n                    </Row>\n                    <Row className=\"justify-content-center\" style={{paddingTop: 30, paddingBottom: 50}}>\n                        {this.state.visibleItems.length ?\n                            <Pagination\n                                items={this.state.visibleItems}\n                                onChangePage={this.onChangePage}/> : null\n                        }\n                    </Row>\n                </Container>\n            </>\n        );\n    }\n}\n\nconst styles = {\n    container: {\n        marginTop: 15,\n        marginBottom: 15,\n        borderStyle: \"solid\",\n        borderWidth: 1,\n        borderRadius: 5,\n        borderColor: \"#cccccc\",\n        paddingTop: 15,\n        paddingBottom: 15,\n        paddingLeft: 25,\n        paddingRight: 25\n    },\n    text: {\n        fontSize: 18\n    },\n    icon: {\n        marginTop: 10,\n        marginRight: 10\n    }\n}\n"]},"metadata":{},"sourceType":"module"}